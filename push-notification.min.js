"use strict";angular.module("kwyspa.angular-push-notification",[]).provider("pushNotification",[function(){var Notify=window.Notification;this.enabled="granted"===Notify.permission?!0:!1,this.icons={"default":"default.ico"},this.timeout=0,this.$get=function(){var self=this;return{prompt:function(){return"granted"===Notify.permission?void(self.enabled=!0):(Notify.requestPermission(function(status){Notify.permission!==status&&(Notify.permission=status)}),void(self.enabled="granted"===Notify.permission?!0:!1))},push:function(title,body,icon,tag){if(0!==arguments.length&&self.enabled!==!1){var options={};tag&&(options.tag=tag),icon&&self.icons[icon]&&(options.icon=self.icons[icon]),body&&(options.body=body);var notification=new Notify(title,options);self.timeout>0&&(notification.onshow=function(){setTimeout(function(){notification.close()},self.timeout)})}},isEnabled:function(){return self.enabled},disable:function(){self.enabled=!1},enable:function(){"granted"===Notify.permission&&(self.enabled=!0)}}},this.setIcons=function(icons){this.icons=icons},this.setCloseTime=function(ms){this.timeout=ms}}]);